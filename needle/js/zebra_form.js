(function(b){b.Zebra_DatePicker=function(V,E){var ia={always_show_clear:!1,always_visible:!1,days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),days_abbr:!1,direction:0,disabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear",months:"January February March April May June July August September October November December".split(" "),months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,show_icon:!0,show_week_number:!1,start_date:!1,view:"days", weekend_days:[0,6],zero_pad:!0,onChange:null,onClear:null,onSelect:null},q,g,s,z,B,F,G,I,W,P,Y,p,t,y,u,m,Q,J,K,X,R,v,w,S,L,N,ba,ca,da,C,Z,a=this;a.settings={};var n=b(V),fa=function(c){c||(a.settings=b.extend({},ia,E));a.settings.readonly_element&&n.attr("readonly","readonly");var d={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},l=!1,f=!1,j=!1;for(type in d)b.each(d[type],function(b,c){-1<a.settings.format.indexOf(c)&&("days"==type?l=!0:"months"==type?f=!0:"years"==type&&(j= !0))});C=l&&f&&j?["years","months","days"]:!l&&f&&j?["years","months"]:!l&&!f&&j?["years"]:["years","months","days"];-1==b.inArray(a.settings.view,C)&&(a.settings.view=C[C.length-1]);X=[];b.isArray(a.settings.disabled_dates)&&0<a.settings.disabled_dates.length&&b.each(a.settings.disabled_dates,function(){for(var a=this.split(" "),c=0;4>c;c++){a[c]||(a[c]="*");a[c]=-1<a[c].indexOf(",")?a[c].split(","):Array(a[c]);for(var d=0;d<a[c].length;d++)if(-1<a[c][d].indexOf("-")){var e=a[c][d].match(/^([0-9]+)\-([0-9]+)/); if(null!=e){for(var f=k(e[1]);f<=k(e[2]);f++)-1==b.inArray(f,a[c])&&a[c].push(f+"");a[c].splice(d,1)}}for(d=0;d<a[c].length;d++)a[c][d]=isNaN(k(a[c][d]))?a[c][d]:k(a[c][d])}X.push(a)});var d=new Date,h=!a.settings.reference_date?n.data("zdp_reference_date")&&void 0!=n.data("zdp_reference_date")?n.data("zdp_reference_date"):d:a.settings.reference_date,e,A;w=v=void 0;p=h.getMonth();W=d.getMonth();t=h.getFullYear();P=d.getFullYear();y=h.getDate();Y=d.getDate();if(!0===a.settings.direction)v=h;else if(!1=== a.settings.direction)w=h,N=w.getMonth(),L=w.getFullYear(),S=w.getDate();else if(!b.isArray(a.settings.direction)&&O(a.settings.direction)&&0<k(a.settings.direction)||b.isArray(a.settings.direction)&&(!0===a.settings.direction[0]||O(a.settings.direction[0])&&0<a.settings.direction[0]||(e=T(a.settings.direction[0])))&&(!1===a.settings.direction[1]||O(a.settings.direction[1])&&0<=a.settings.direction[1]||(A=T(a.settings.direction[1]))))v=e?e:new Date(t,p,y+(!b.isArray(a.settings.direction)?k(a.settings.direction): k(!0===a.settings.direction[0]?0:a.settings.direction[0]))),p=v.getMonth(),t=v.getFullYear(),y=v.getDate(),A&&+A>=+v?w=A:!A&&(!1!==a.settings.direction[1]&&b.isArray(a.settings.direction))&&(w=new Date(t,p,y+k(a.settings.direction[1]))),w&&(N=w.getMonth(),L=w.getFullYear(),S=w.getDate());else if(!b.isArray(a.settings.direction)&&O(a.settings.direction)&&0>k(a.settings.direction)||b.isArray(a.settings.direction)&&(!1===a.settings.direction[0]||O(a.settings.direction[0])&&0>a.settings.direction[0])&& (O(a.settings.direction[1])&&0<=a.settings.direction[1]||(e=T(a.settings.direction[1]))))w=new Date(t,p,y+(!b.isArray(a.settings.direction)?k(a.settings.direction):k(!1===a.settings.direction[0]?0:a.settings.direction[0]))),N=w.getMonth(),L=w.getFullYear(),S=w.getDate(),e&&+e<+w?v=e:!e&&b.isArray(a.settings.direction)&&(v=new Date(L,N,S-k(a.settings.direction[1]))),v&&(p=v.getMonth(),t=v.getFullYear(),y=v.getDate());if(D(t,p,y)){for(;D(t);)v?(t++,p=0):(t--,p=11);for(;D(t,p);)v?(p++,y=1):(p--,y=31), 11<p?(t++,p=0,y=1):0>p&&(t--,p=11,y=31);for(;D(t,p,y);)v?y++:y--;d=new Date(t,p,y);t=d.getFullYear();p=d.getMonth();y=d.getDate()}(e=T(n.val()||(a.settings.start_date?a.settings.start_date:"")))&&D(e.getFullYear(),e.getMonth(),e.getDate())&&n.val("");ea(e);if(!a.settings.always_visible&&(c||(a.settings.show_icon?(e='<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==n.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>',s=b(e),a.icon=s,Z=s.add(n)):Z=n,Z.bind("click", function(c){c.preventDefault();n.attr("disabled")||("none"!=g.css("display")?a.hide():a.show())}),void 0!=s&&s.insertAfter(V)),void 0!=s)){a.settings.inside&&s.addClass("Zebra_DatePicker_Icon_Inside");e=n.position();A=n.outerHeight(!1);var d=parseInt(n.css("marginTop"),10)||0,h=n.outerWidth(!1),r=parseInt(n.css("marginLeft"),10)||0,x=s.outerWidth(!0),U=s.outerHeight(!0);a.settings.inside?s.css({left:e.left+r+h-x,top:e.top+d+(A-U)/2}):s.css({left:e.left+h,top:e.top+(A-U)/2})}void 0!=s&&(n.is(":visible")? s.css("display","block"):s.css("display","none"));c||(e='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&laquo;</td><td class="dp_caption">&nbsp;</td><td class="dp_next">&raquo;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+a.settings.lang_clear_date+"</td></tr></table></div>",g=b(e),a.datepicker=g,z=b("table.dp_header",g),B=b("table.dp_daypicker", g),F=b("table.dp_monthpicker",g),G=b("table.dp_yearpicker",g),I=b("table.dp_footer",g),a.settings.always_visible?n.attr("disabled")||(a.settings.always_visible.append(g),a.show()):b("body").append(g),g.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){b(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){b(this).removeClass("dp_hover")}), c=b("td",z),b.browser.mozilla?c.css("MozUserSelect","none"):b.browser.msie?c.bind("selectstart",function(){return!1}):c.mousedown(function(){return!1}),b(".dp_previous",z).bind("click",function(){b(this).hasClass("dp_blocked")||("months"==q?m--:"years"==q?m-=12:0>--u&&(u=11,m--),M())}),b(".dp_caption",z).bind("click",function(){q="days"==q?-1<b.inArray("months",C)?"months":-1<b.inArray("years",C)?"years":"days":"months"==q?-1<b.inArray("years",C)?"years":-1<b.inArray("days",C)?"days":"months":-1< b.inArray("days",C)?"days":-1<b.inArray("months",C)?"months":"years";M()}),b(".dp_next",z).bind("click",function(){b(this).hasClass("dp_blocked")||("months"==q?m++:"years"==q?m+=12:12==++u&&(u=0,m++),M())}),B.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){$(m,u,k(b(this).html()),"days",b(this))}),F.delegate("td:not(.dp_disabled)","click",function(){var c=b(this).attr("class").match(/dp\_month\_([0-9]+)/);u=k(c[1]);-1==b.inArray("days",C)? $(m,u,1,"months",b(this)):(q="days",a.settings.always_visible&&n.val(""),M())}),G.delegate("td:not(.dp_disabled)","click",function(){m=k(b(this).html());-1==b.inArray("months",C)?$(m,1,1,"years",b(this)):(q="months",a.settings.always_visible&&n.val(""),M())}),b("td",I).bind("click",function(c){c.preventDefault();n.val("");a.settings.always_visible||(m=u=K=J=Q=null,I.css("display","none"));a.hide();if(a.settings.onClear&&"function"==typeof a.settings.onClear)a.settings.onClear(n)}),a.settings.always_visible|| b(document).bind({mousedown:a._mousedown,keyup:a._keyup}),M())};a.hide=function(){a.settings.always_visible||(ga("hide"),g.css("display","none"))};a.show=function(){q=a.settings.view;var c=T(n.val()||(a.settings.start_date?a.settings.start_date:""));c?(J=c.getMonth(),u=c.getMonth(),K=c.getFullYear(),m=c.getFullYear(),Q=c.getDate(),D(K,J,Q)&&(n.val(""),u=p,m=t)):(u=p,m=t);M();if(a.settings.always_visible)g.css("display","block");else{var c=g.outerWidth(),d=g.outerHeight(),l=(void 0!=s?s.offset().left+ s.outerWidth(!0):n.offset().left+n.outerWidth(!0))+a.settings.offset[0],f=(void 0!=s?s.offset().top:n.offset().top)-d+a.settings.offset[1],j=b(window).width(),h=b(window).height(),e=b(window).scrollTop(),A=b(window).scrollLeft();l+c>A+j&&(l=A+j-c);l<A&&(l=A);f+d>e+h&&(f=e+h-d);f<e&&(f=e);g.css({left:l,top:f});g.fadeIn(b.browser.msie&&b.browser.version.match(/^[6-8]/)?0:150,"linear");ga()}};a.update=function(c){a.original_direction&&(a.original_direction=a.direction);a.settings=b.extend(a.settings, c);fa(!0)};var T=function(c){c+="";if(""!=b.trim(c)){var d;d=a.settings.format.replace(/\s/g,"").replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");for(var l="dDjlNSwFmMnYy".split(""),f=[],j=[],h=0;h<l.length;h++)-1<(position=d.indexOf(l[h]))&&f.push({character:l[h],position:position});f.sort(function(a,c){return a.position-c.position});b.each(f,function(a,c){switch(c.character){case "d":j.push("0[1-9]|[12][0-9]|3[01]");break;case "D":j.push("[a-z]{3}");break;case "j":j.push("[1-9]|[12][0-9]|3[01]");break; case "l":j.push("[a-z]+");break;case "N":j.push("[1-7]");break;case "S":j.push("st|nd|rd|th");break;case "w":j.push("[0-6]");break;case "F":j.push("[a-z]+");break;case "m":j.push("0[1-9]|1[012]+");break;case "M":j.push("[a-z]{3}");break;case "n":j.push("[1-9]|1[012]");break;case "Y":j.push("[0-9]{4}");break;case "y":j.push("[0-9]{2}")}});if(j.length&&(f.reverse(),b.each(f,function(a,c){d=d.replace(c.character,"("+j[j.length-a-1]+")")}),j=RegExp("^"+d+"$","ig"),segments=j.exec(c.replace(/\s/g,"")))){var e, m,r,n="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),U="January February March April May June July August September October November December".split(" "),g,p=!0;f.reverse();b.each(f,function(c,d){if(!p)return!0;switch(d.character){case "m":case "n":m=k(segments[c+1]);break;case "d":case "j":e=k(segments[c+1]);break;case "D":case "l":case "F":case "M":g="D"==d.character||"l"==d.character?a.settings.days:a.settings.months;p=!1;b.each(g,function(a,b){if(p)return!0;if(segments[c+ 1].toLowerCase()==b.substring(0,"D"==d.character||"M"==d.character?3:b.length).toLowerCase()){switch(d.character){case "D":segments[c+1]=n[a].substring(0,3);break;case "l":segments[c+1]=n[a];break;case "F":segments[c+1]=U[a];m=a+1;break;case "M":segments[c+1]=U[a].substring(0,3),m=a+1}p=!0}});break;case "Y":r=k(segments[c+1]);break;case "y":r="19"+k(segments[c+1])}});if(p&&(c=new Date(r,(m||1)-1,e||1),c.getFullYear()==r&&c.getDate()==(e||1)&&c.getMonth()==(m||1)-1))return c}return!1}},ha=function(){var c= (new Date(m,u+1,0)).getDate(),d=(new Date(m,u,1)).getDay(),l=(new Date(m,u,0)).getDate(),d=d-a.settings.first_day_of_week,d=0>d?7+d:d;aa(a.settings.months[u]+", "+m);var f="<tr>";a.settings.show_week_number&&(f+="<th>"+a.settings.show_week_number+"</th>");for(var j=0;7>j;j++)f+="<th>"+(b.isArray(a.settings.days_abbr)&&void 0!=a.settings.days_abbr[(a.settings.first_day_of_week+j)%7]?a.settings.days_abbr[(a.settings.first_day_of_week+j)%7]:a.settings.days[(a.settings.first_day_of_week+j)%7].substr(0, 2))+"</th>";f+="</tr><tr>";for(j=0;42>j;j++){0<j&&0==j%7&&(f+="</tr><tr>");if(0==j%7&&a.settings.show_week_number){var h=new Date(m,u,j-d+1),e=h.getFullYear(),n=h.getMonth()+1,h=h.getDate(),r=void 0,k=void 0,g=void 0,p=g=void 0,q=void 0,g=k=r=void 0;3>n?(r=e-1,k=(r/4|0)-(r/100|0)+(r/400|0),g=((r-1)/4|0)-((r-1)/100|0)+((r-1)/400|0),g=k-g,p=0,q=h-1+31*(n-1)):(r=e,k=(r/4|0)-(r/100|0)+(r/400|0),g=((r-1)/4|0)-((r-1)/100|0)+((r-1)/400|0),g=k-g,p=g+1,q=h+((153*(n-3)+2)/5|0)+58+g);r=(r+k)%7;h=(q+r-p)%7;k= q+3-h;g=0>k?53-((r-g)/5|0):k>364+g?1:(k/7|0)+1;f+='<td class="dp_week_number">'+g+"</td>"}e=j-d+1;j<d?f+='<td class="dp_not_in_month">'+x(l-d+j+1,a.settings.zero_pad?2:0)+"</td>":e>c?f+='<td class="dp_not_in_month">'+x(e-c,a.settings.zero_pad?2:0)+"</td>":(n=(a.settings.first_day_of_week+j)%7,h="",D(m,u,e)?(h=-1<b.inArray(n,a.settings.weekend_days)?"dp_weekend_disabled":h+" dp_disabled",u==W&&(m==P&&Y==e)&&(h+=" dp_disabled_current")):(-1<b.inArray(n,a.settings.weekend_days)&&(h="dp_weekend"),u== J&&(m==K&&Q==e)&&(h+=" dp_selected"),u==W&&(m==P&&Y==e)&&(h+=" dp_current")),f+="<td"+(""!=h?' class="'+b.trim(h)+'"':"")+">"+(a.settings.zero_pad?x(e,2):e)+"</td>")}B.html(b(f+"</tr>"));a.settings.always_visible&&(ba=b("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",B));B.css("display","")},ga=function(a){if(b.browser.msie&&b.browser.version.match(/^6/)){if(!R){var d=k(g.css("zIndex"))-1;R=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no", frameborder:0,allowtransparency:"true",css:{zIndex:d,position:"absolute",top:-1E3,left:-1E3,width:g.outerWidth(),height:g.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}});b("body").append(R)}switch(a){case "hide":R.css("display","none");break;default:a=g.offset(),R.css({top:a.top,left:a.left,display:"block"})}}},D=function(c,d,l){if(b.isArray(a.settings.direction)||0!==k(a.settings.direction)){var f=k(H(c,"undefined"!=typeof d?x(d,2):"","undefined"!=typeof l? x(l,2):"")),j=(f+"").length;if(8==j&&("undefined"!=typeof v&&f<k(H(t,x(p,2),x(y,2)))||"undefined"!=typeof w&&f>k(H(L,x(N,2),x(S,2))))||6==j&&("undefined"!=typeof v&&f<k(H(t,x(p,2)))||"undefined"!=typeof w&&f>k(H(L,x(N,2))))||4==j&&("undefined"!=typeof v&&f<t||"undefined"!=typeof w&&f>L))return!0}if(X){"undefined"!=typeof d&&(d+=1);var h=!1;b.each(X,function(){if(!h&&(-1<b.inArray(c,this[2])||-1<b.inArray("*",this[2])))if("undefined"!=typeof d&&-1<b.inArray(d,this[1])||-1<b.inArray("*",this[1]))if("undefined"!= typeof l&&-1<b.inArray(l,this[0])||-1<b.inArray("*",this[0])){if("*"==this[3])return h=!0;var a=(new Date(c,d-1,l)).getDay();if(-1<b.inArray(a,this[3]))return h=!0}});if(h)return!0}return!1},O=function(a){return(a+"").match(/^\-?[0-9]+$/)?!0:!1},aa=function(c){b(".dp_caption",z).html(c);if(b.isArray(a.settings.direction)||0!==k(a.settings.direction)){c=m;var d=u,l,f;"days"==q?(f=0>d-1?H(c-1,"11"):H(c,x(d-1,2)),l=11<d+1?H(c+1,"00"):H(c,x(d+1,2))):"months"==q?(f=c-1,l=c+1):"years"==q&&(f=c-7,l=c+7); D(f)?(b(".dp_previous",z).addClass("dp_blocked"),b(".dp_previous",z).removeClass("dp_hover")):b(".dp_previous",z).removeClass("dp_blocked");D(l)?(b(".dp_next",z).addClass("dp_blocked"),b(".dp_next",z).removeClass("dp_hover")):b(".dp_next",z).removeClass("dp_blocked")}},M=function(){if(""==B.text()||"days"==q){if(""==B.text()){a.settings.always_visible||g.css("left",-1E3);g.css({display:"block"});ha();var c=B.outerWidth(),d=B.outerHeight();z.css("width",c);F.css({width:c,height:d});G.css({width:c, height:d});I.css("width",c);g.css({display:"none"})}else ha();F.css("display","none");G.css("display","none")}else if("months"==q){aa(m);c="<tr>";for(d=0;12>d;d++){0<d&&0==d%3&&(c+="</tr><tr>");var l="dp_month_"+d;D(m,d)?l+=" dp_disabled":!1!==J&&J==d?l+=" dp_selected":W==d&&P==m&&(l+=" dp_current");c+='<td class="'+b.trim(l)+'">'+(b.isArray(a.settings.months_abbr)&&void 0!=a.settings.months_abbr[d]?a.settings.months_abbr[d]:a.settings.months[d].substr(0,3))+"</td>"}F.html(b(c+"</tr>"));a.settings.always_visible&& (ca=b("td:not(.dp_disabled)",F));F.css("display","");B.css("display","none");G.css("display","none")}else if("years"==q){aa(m-7+" - "+(m+4));c="<tr>";for(d=0;12>d;d++)0<d&&0==d%3&&(c+="</tr><tr>"),l="",D(m-7+d)?l+=" dp_disabled":K&&K==m-7+d?l+=" dp_selected":P==m-7+d&&(l+=" dp_current"),c+="<td"+(""!=b.trim(l)?' class="'+b.trim(l)+'"':"")+">"+(m-7+d)+"</td>";G.html(b(c+"</tr>"));a.settings.always_visible&&(da=b("td:not(.dp_disabled)",G));G.css("display","");B.css("display","none");F.css("display", "none")}a.settings.onChange&&("function"==typeof a.settings.onChange&&void 0!=q)&&(c="days"==q?B.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"==q?F.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):G.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"),c.each(function(){if("days"==q)b(this).data("date",m+"-"+x(u+1,2)+"-"+x(k(b(this).text()),2));else if("months"==q){var a=b(this).attr("class").match(/dp\_month\_([0-9]+)/); b(this).data("date",m+"-"+x(k(a[1])+1,2))}else b(this).data("date",k(b(this).text()))}),a.settings.onChange(q,c,n));(a.settings.always_show_clear||a.settings.always_visible||""!=n.val())&&"block"!=I.css("display")?I.css("display",""):I.css("display","none")},$=function(c,d,l,f,j){var h=new Date(c,d,l,12,0,0);f="days"==f?ba:"months"==f?ca:da;var e;e="";for(var g=h.getDate(),k=h.getDay(),p=a.settings.days[k],q=h.getMonth()+1,t=a.settings.months[q-1],s=h.getFullYear()+"",v=0;v<a.settings.format.length;v++){var w= a.settings.format.charAt(v);switch(w){case "y":s=s.substr(2);case "Y":e+=s;break;case "m":q=x(q,2);case "n":e+=q;break;case "M":t=b.isArray(a.settings.months_abbr)&&void 0!=a.settings.months_abbr[q-1]?a.settings.months_abbr[q-1]:a.settings.months[q-1].substr(0,3);case "F":e+=t;break;case "d":g=x(g,2);case "j":e+=g;break;case "D":p=b.isArray(a.settings.days_abbr)&&void 0!=a.settings.days_abbr[k]?a.settings.days_abbr[k]:a.settings.days[k].substr(0,3);case "l":e+=p;break;case "N":k++;case "w":e+=k;break; case "S":e=1==g%10&&"11"!=g?e+"st":2==g%10&&"12"!=g?e+"nd":3==g%10&&"13"!=g?e+"rd":e+"th";break;default:e+=w}}n.val(e);a.settings.always_visible&&(J=h.getMonth(),u=h.getMonth(),K=h.getFullYear(),m=h.getFullYear(),Q=h.getDate(),f.removeClass("dp_selected"),j.addClass("dp_selected"));a.hide();ea(h);if(a.settings.onSelect&&"function"==typeof a.settings.onSelect)a.settings.onSelect(e,c+"-"+x(d+1,2)+"-"+x(l,2),h,n)},H=function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b]+"";return a},x=function(a, b){for(a+="";a.length<b;)a="0"+a;return a},k=function(a){return parseInt(a,10)},ea=function(c){a.settings.pair&&b.each(a.settings.pair,function(){var a=b(this);!a.data||!a.data("Zebra_DatePicker")?a.data("zdp_reference_date",c):(a=a.data("Zebra_DatePicker"),a.update({reference_date:c,direction:0==a.settings.direction?1:a.settings.direction}),a.settings.always_visible&&a.show())})};a._keyup=function(b){("block"==g.css("display")||27==b.which)&&a.hide();return!0};a._mousedown=function(c){if("block"== g.css("display")){if(a.settings.show_icon&&b(c.target).get(0)===s.get(0))return!0;0==b(c.target).parents().filter(".Zebra_DatePicker").length&&a.hide()}return!0};fa()};b.fn.Zebra_DatePicker=function(V){return this.each(function(){if(void 0!=b(this).data("Zebra_DatePicker")){var E=b(this).data("Zebra_DatePicker");void 0!=E.icon&&E.icon.remove();E.datepicker.remove();b(document).unbind("keyup",E._keyup);b(document).unbind("mousedown",E._mousedown)}E=new b.Zebra_DatePicker(this,V);b(this).data("Zebra_DatePicker", E)})}})(jQuery);(function(c){c.Zebra_Form=function(v,y){var g=this,M={scroll_to_error:!0,tips_position:"left",close_tips:!0,validate_on_the_fly:!1,validate_all:!1,assets_path:null};g.settings={};var p={},I={},x={},E=[],m={},s={},z=!1,A=!1,n=c(v);g.filter_input=function(a,c,b){var d,f="";if(window.event)d=window.event.keyCode,c=window.event;else if(c)d=c.which;else return!0;switch(a){case "alphabet":f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case "digits":case "number":case "float":f="0123456789"; break;case "alphanumeric":f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";break;default:return!0}b&&(f+=b);c=c.srcElement?c.srcElement:c.target||c.currentTarget;if(null==d||0==d||8==d||9==d||13==d||27==d)return!0;d=String.fromCharCode(d);return-1<f.indexOf(d)||"number"==a&&"-"==d&&0==B(c)||"float"==a&&("-"==d&&0==B(c)||"."==d&&0!=B(c)&&null==c.value.match(/\./))?!0:!1};g.init=function(){g.settings=c.extend({},M,y);n.find("option.dummy").remove();c("div.error",n).each(function(){c("div.close a", c(this)).bind("click",function(a){a.preventDefault();c(this).closest("div.error").animate({height:0,opacity:0},250,function(){c(this).remove()})})});c(".control",n).each(function(){var a=c(this),b={id:a.attr("id"),type:F(a)},e=a.closest(".row");e.length&&a.bind({focus:function(){e.addClass("highlight")},blur:function(){e.removeClass("highlight")}});if(a.hasClass("inside")&&("text"==b.type||"password"==b.type||"textarea"==b.type)){var d=a.position(),j="text"==b.type||"password"==b.type?jQuery("<input>").attr({type:"text", "class":"Zebra_Form_Placeholder",autocomplete:"off",value:a.attr("title")}):jQuery("<textarea>").attr({"class":"Zebra_Form_Placeholder",autocomplete:"off"}).html(a.attr("title"));"password"==b.type&&a.css("fontFamily","inherit");j.css({display:"none",fontFamily:a.css("fontFamily"),fontSize:a.css("fontSize"),fontStyle:a.css("fontStyle"),fontWeight:a.css("fontWeight"),left:d.left,top:d.top,width:a.width()+(parseInt(a.css("borderLeftWidth"),10)||0)+(parseInt(a.css("borderRightWidth"),10)||0),height:a.height()+ (parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("borderBottomWidth"),10)||0),paddingTop:parseInt(a.css("paddingTop"),10)||0,paddingRight:parseInt(a.css("paddingRight"),10)||0,paddingBottom:parseInt(a.css("paddingBottom"),10)||0,paddingLeft:parseInt(a.css("paddingLeft"),10)||0,marginTop:parseInt(a.css("marginTop"),10)||0,marginRight:parseInt(a.css("marginRight"),10)||0,marginBottom:parseInt(a.css("marginBottom"),10)||0,marginLeft:parseInt(a.css("marginLeft"),10)||0}).insertAfter(a);a.removeAttr("title"); j.bind("focus",function(){a.focus()});a.bind({focus:function(){j.css("display","none")},blur:function(){""==c(this).val()&&j.css("display","block")}});a.data("Zebra_Form_Placeholder",j);E.push(a)}else a.hasClass("other")&&"select-one"==b.type&&(K(a),a.change(function(){K(a)}));"password"==b.type&&a.css("fontFamily","Verdana, Tahoma, Arial");!g.settings.clientside_disabled&&void 0!=typeof g.settings.validation_rules[b.id]&&g.register(a,!1);if(("text"==b.type||"textarea"==b.type||"password"==b.type)&& a.attr("maxlength"))if(a.data("maxlength",a.attr("maxlength")),a.bind("keyup",function(){var a=c(this),b=a.data("maxlength"),e=J(a);a.attr("maxlength",b-e);a.hasClass("show-character-counter")&&(a=b-e-a.val().length,q.html(0>a?"<span>"+a+"</span>":a))}),a.hasClass("show-character-counter")){var d=a.position(),q=jQuery("<div>",{"class":"Zebra_Character_Counter",css:{visibility:"hidden"}}).html(a.data("maxlength")).insertAfter(a);width=q.outerWidth();height=q.outerHeight();q.css({top:d.top+a.outerHeight()- height/1.5,left:d.left+a.outerWidth()-width/1.5,width:q.width(),visibility:"visible"});a.trigger("keyup")}if(("text"==b.type||"password"==b.type)&&a.data("prefix")){var d=a.position(),b=a.data("prefix"),r=decodeURIComponent(b.replace(/\+/g," ")).match(/^img\:(.*)/i),b=null!=r?jQuery("<img>",{src:r[1]}):jQuery("<div>",{css:{"font-family":a.css("fontFamily"),"font-size":a.css("fontSize")}}).html(decodeURIComponent(b.replace(/\+/g," ")));b.attr({"class":"Zebra_Form_Input_Prefix"}).css({position:"absolute", visibility:"hidden"}).insertAfter(a);b.css({top:d.top+Math.round((a.outerHeight()-b.outerHeight())/2),left:d.left+parseInt(a.css("paddingLeft"),10),visibility:"visible"});a.css({paddingLeft:"+="+b.outerWidth(!0),width:"-="+b.outerWidth(!0)})}});for(var a in g.settings.validation_rules)for(var e in g.settings.validation_rules[a])"dependencies"==e&&function(){var b=g.settings.validation_rules[a][e];"string"==typeof b[1]&&(b=b[0]);for(var d in b){var h=c('input[name="'+d+'"],select[name="'+d+'"],textarea[name="'+ d+'"]',v);0==h.length&&(h=c('input[name="'+d+'[]"],select[name="'+d+'[]"],textarea[name="'+d+'[]"]',v));if(0<h.length){m[d]||(m[d]={conditions:{},elements:[],event:!1});-1==c.inArray(a,m[d].elements)&&m[d].elements.push(a);var l=w(b[d]),j=F(c(h[0]));m[d].conditions[l]||(m[d].conditions[l]=function(){var a=b[d],e=[];h.each(function(){switch(j){case "radio":case "checkbox":void 0!=c(this).attr("checked")&&e.push(c(this).val());break;default:e.push(c(this).val())}});var g=!1;0<e.length&&(c.isArray(a)? c.each(a,function(b){var d=0;c.each(e,function(f){!c.isArray(a[b])&&e[f]==a[b]?g=!0:c.isArray(a[b])&&-1<c.inArray(e[f],a[b])&&d++});!g&&d==a[b].length&&(g=!0)}):c.each(e,function(b){a==e[b]&&(g=!0)}));return g})}}0<h.length&&!1==m[d].event&&(m[d].event=function(){c.each(m[d].elements,function(a){var b=g.settings.validation_rules[m[d].elements[a]].dependencies,e=!0;if("string"==typeof b[1]){var f=b[1].split(","),f=c.map(f,function(a){return c.trim(a)}),h=f.shift();arguments=f;b=b[0]}for(var j in b)f= w(b[j]),m[j].conditions[f]()||(e=!1);if(void 0!=b[d]&&void 0!=h){b=window;h=h.split(".");j=h.pop();for(f=0;f<h.length;f++)if(void 0!=b[h[f]])b=b[h[f]];else throw Error('"'+h[f]+"\" namespace doesn't exist in the global scope!");try{b[j].apply(void 0,[e].concat(arguments))}catch(l){throw Error('"'+j+'" callback function was not found!');}}})},h.bind("checkbox"==j||"radio"==j||"select-multiple"==j||"submit"==j||"button"==j?"click":"select-one"==j?"change":"blur",m[d].event));h.length&&m[d].event()}(); var b=c(".captcha-container");if(0<b.length){var d=c("img",b);c("a",b).bind("click",function(a){a.preventDefault();d.attr("src",d.attr("src").replace(/nocache=[0-9]+/,"nocache="+ +new Date))})}n.bind("submit",function(a){!1==z&&(void 0!=g.settings.validation_rules&&!A)&&(g.validate()||a.preventDefault());A=!1});0<E.length&&setInterval(N,50)};g.attach_tip=function(a,c){var b=a.attr("id");p[b].message=c;g.show_errors(a)};g.clear_errors=function(){c(".Zebra_Form_error_iFrameShim").remove();c(".Zebra_Form_error_message").remove(); x={}};g.end_file_upload=function(a,e){var b=c("#"+a);if(b.length&&(g.clear_errors(),n.removeAttr("target"),c("#"+a+"_iframe").remove(),c("#"+a+"_spinner").remove(),void 0!=p[a]))if(void 0!=e&&("object"==typeof e&&void 0!=e[0]&&void 0!=e[1]&&void 0!=e[2]&&void 0!=e[3])&&b.data("file_info",e),!0!==g.validate_control(b))b.val(""),b.css("visibility","visible"),g.show_errors(b);else{var d=b.offset(),f=jQuery("<div>",{"class":"Zebra_Form_filename",css:{left:d.left,top:d.top,width:b.outerWidth(),opacity:0}}).html(e[0]), d=jQuery("<a>",{href:"javascript:void(0)"}).html("x").bind("click",function(a){a.preventDefault();f.remove();b.val("");b.data("file_info")&&b.removeData("file_info");b.css("visibility","visible")});c("body").append(f.append(d));f.css({top:parseInt(f.css("top"),10)+(b.outerHeight()-f.outerHeight())/2,opacity:1})}};g.hide_error=function(a,e){var b=c("#"+a);if(void 0==e&&g.settings.validate_on_the_fly&&!0!==g.validate_control(b))g.show_errors(b,!1);else{var d=c("#Zebra_Form_error_message_"+a);0<d.length&& d.animate({opacity:0},250,function(){var b=d.data("shim");void 0!=b&&b.remove();d.remove();delete x[a]})}};g.register=function(a,e){var b={id:a.attr("id"),name:a.attr("name"),type:F(a)};b.name=b.name.replace(/\[\]$/,"");a.hasClass("time")&&(b.name=b.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));switch(b.type){case "radio":case "checkbox":a.bind({click:function(){g.hide_error(b.name)},blur:function(){g.hide_error(b.name)}});void 0==I[b.id]&&(I[b.id]=n.find("input[name^="+b.name+"]"));break;case "file":var d= a.clone(!0);d.attr("value","");a.replaceWith(d);d.bind({keypress:function(){d.attr("value","")},change:function(){if(void 0!=p[b.name].rules.upload){g.hide_error(b.name);d.data("file_info")&&d.removeData("file_info");var e=jQuery('<iframe id="'+b.id+'_iframe" name="'+b.id+'_iframe">',{src:"javascript:void(0)",scrolling:"no",marginwidth:0,marginheight:0,width:0,height:0,frameborder:0,allowTransparency:"true"});c("body").append(e);e=n.attr("action");n.attr("action",decodeURIComponent(g.settings.assets_path)+ "process.php?form="+n.attr("id")+"&control="+b.id+"&path="+encodeURIComponent(decodeURIComponent(p[b.name].rules.upload[0]))+"&nocache="+(new Date).getTime());n.attr("target",b.id+"_iframe");a.css("visibility","hidden");var f=a.offset(),f=jQuery("<div>",{id:b.id+"_spinner","class":"Zebra_Form_spinner",css:{left:f.left,top:f.top}});c("body").append(f);z=!0;n.trigger("submit");n.attr("action",e);z=!1}},blur:function(){g.hide_error(b.name)}});a=d;break;case "select-one":case "select-multiple":a.bind({change:function(){g.hide_error(b.name)}, blur:function(){g.hide_error(b.name)}});break;default:a.blur(function(){var c=b.name;if("text"==b.type&&a.hasClass("other")){var d=b.id.match(/^(.*)\_other$/);null!=d&&(c=d[1])}g.hide_error(c)})}var f=g.settings.validation_rules[b.name];if(null!=f)if(void 0==e){var t=n.find(".control");c.each(t,function(d,e){if(e==a.get(0)){c(e);for(var g=null,h=d-1;null==g&&void 0!=t[h];)g=c(t[h]).attr("id"),h--;if(p[g]){h={};for(d in p)h[d]=p[d],g==d&&(h[b.id]={element:a,rules:f});p=h}else g={},g[b.id]={element:a, rules:f},c.extend(p,g)}})}else if(void 0!=e&&c("#"+e).length){c("#"+e).attr("id");var h={};for(index in p)h[index]=p[index],previous_element_id==index&&(h[b.id]={element:a,rules:f});p=h}else void 0!=e&&!1===e&&(p[b.id]={element:a,rules:f})};g.show_errors=function(a,e){void 0!=e&&!1===e||g.clear_errors();var b=0;for(index in p){var d=p[index],f=d.element,t={id:f.attr("id"),name:f.attr("name"),type:F(f)},h="radio"==t.type||"checkbox"==t.type?t.name.replace(/\[\]$/,""):t.id;f.hasClass("time")&&(h=t.name.replace(/\_(hours|minutes|seconds|ampm)$/, ""));if(!(void 0!=a&&a.get(0)!=f.get(0))&&void 0!=d.message&&void 0==x[h]){"none"!=f.css("display")&&(!(void 0!=e&&!1===e)&&!(g.settings.validate_all&&0<b))&&f.focus();var l=c.extend(f.offset()),l=c.extend(l,{right:Math.floor(l.left+f.width())}),j=jQuery("<div/>",{"class":"Zebra_Form_error_message",id:"Zebra_Form_error_message_"+h,css:{opacity:0}}),d=jQuery("<div/>",{"class":"message"+(!g.settings.close_tips?" noclose":""),css:{_width:"auto"}}).html(d.message).appendTo(j);g.settings.close_tips&&jQuery("<a/>", {href:"javascript:void(0)","class":"close"+(c.browser.msie&&c.browser.version.match(/^6/)?"-ie6":"")}).html("x").appendTo(d).bind({click:function(a){a.preventDefault();g.hide_error(c(this).closest("div.Zebra_Form_error_message").attr("id").replace(/^Zebra\_Form\_error\_message\_/,""),!0)},focus:function(){c(this).blur()}});var q=jQuery("<div/>",{"class":"arrow"}).appendTo(j);c("body").append(j);var r=j.outerWidth(),m=j.outerHeight(),m=q.outerWidth(),d=q.outerHeight(),k=("left"==g.settings.tips_position? l.left:l.right)-r/2;q.css("left",r/2-m/2-1);if("radio"==t.type||"checkbox"==t.type)k=l.right-r/2-f.outerWidth()/2+1;0>k&&(k=2);j.css("left",k);r=j.outerWidth();m=j.outerHeight();f=l.top-m+d/2-1;0>f&&(f=2);j.css({left:k+"px",top:f+"px",height:m-d/2+"px"});h=x[h]=j;c.browser.msie&&c.browser.version.match(/^6/)&&!h.data("shim")&&(f=h.offset(),t=parseInt(h.css("zIndex"),10)-1,f=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowTransparency:"true","class":"Zebra_Form_error_iFrameShim", css:{zIndex:t,position:"absolute",top:f.top,left:f.left,width:h.outerWidth(),height:h.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"block"}}),c("body").append(f),h.data("shim",f));j.animate({opacity:0.9},250);1==++b&&(g.settings.scroll_to_error&&!(void 0!=e&&!1===e))&&c("html, body").animate({scrollTop:Math.max(parseInt(j.css("top"),10)+parseInt(j.css("height"),10)/2-c(window).height()/2,0)},0);if(!g.settings.validate_all)break}}};g.submit=function(){n.trigger("submit")}; g.validate_control=function(a){var e={id:a.attr("id"),name:a.attr("name"),type:F(a)},b=!0,d=p[e.id],f="radio"==e.type||"checkbox"==e.type?e.name.replace(/\[\]$/,""):e.id;a.hasClass("time")&&(f=e.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));if(void 0!=d&&("none"!=a.css("display")&&"hidden"!=a.css("visibility")||a.data("file_info"))){var m=null;delete d.message;for(var h in d.rules){if(!b)break;switch(h){case "alphabet":switch(e.type){case "password":case "text":case "textarea":var l=RegExp("^[a-z"+ D(d.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig");""!=c.trim(a.val())&&!l.test(a.val())&&(b=!1)}break;case "alphanumeric":switch(e.type){case "password":case "text":case "textarea":l=RegExp("^[a-z0-9"+D(d.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=c.trim(a.val())&&!l.test(a.val())&&(b=!1)}break;case "compare":switch(e.type){case "password":case "text":case "textarea":if(!c("#"+d.rules[h][0])||a.val()!=c("#"+d.rules[h][0]).val())b=!1}break;case "dependencies":if(!L(f))return!0;break;case "custom":var j= !1;c.each(d.rules[h],function(d,e){if(!j){e=c.merge(c.merge([e[0]],[a.val()]),e.slice(1));var f="function"==typeof e[0]?e[0]:"function"==typeof window[e[0]]?window[e[0]]:!1;if(!1!==f)b=f.apply(f,e.slice(1));else throw b=!1,Error('Function "'+e[0]+"\" doesn't exist!");b||(custom_rule_error_message=e[e.length-1],j=!0)}});break;case "date":switch(e.type){case "text":if(""!=c.trim(a.val())){for(var l=!1,q=a.data("Zebra_DatePicker").settings.format.replace(/\s/g,""),r="dDjlNSwFmMnYyGHghaAisU".split(""), n=[],k=[],q=D(q),s=0;s<r.length;s++)-1<(position=q.indexOf(r[s]))&&n.push({character:r[s],position:position});n.sort(function(a,b){return a.position-b.position});c.each(n,function(a,b){switch(b.character){case "d":k.push("0[1-9]|[12][0-9]|3[01]");break;case "D":k.push("[a-z]{3}");break;case "j":k.push("[1-9]|[12][0-9]|3[01]");break;case "l":k.push("[a-z]+");break;case "N":k.push("[1-7]");break;case "S":k.push("st|nd|rd|th");break;case "w":k.push("[0-6]");break;case "F":k.push("[a-z]+");break;case "m":k.push("0[1-9]|1[012]+"); break;case "M":k.push("[a-z]{3}");break;case "n":k.push("[1-9]|1[012]");break;case "Y":k.push("[0-9]{4}");break;case "y":k.push("[0-9]{2}");break;case "G":k.push("[0-9]|1[0-9]|2[0-3]");break;case "H":k.push("0[0-9]|1[0-9]|2[0-3]");break;case "g":k.push("[0-9]|1[0-2]");break;case "h":k.push("0[0-9]|1[0-2]");break;case "a":case "A":k.push("(am|pm)");break;case "i":k.push("[0-5][0-9]");break;case "s":k.push("[0-5][0-9]")}});if(0<k.length&&(n.reverse(),c.each(n,function(a,b){q=q.replace(b.character,"("+ k[k.length-a-1]+")")}),k=RegExp("^"+q+"$","ig"),segments=k.exec(a.val().replace(/\s/g,"")))){var v=null,C=null,G=null,x="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),w="January February March April May June July August September October November December".split(" "),y=null,H=!0;n.reverse();c.each(n,function(b,d){if(!H)return!0;switch(d.character){case "m":case "n":C=parseInt(segments[b+1],10);break;case "d":case "j":v=parseInt(segments[b+1],10);break;case "D":case "l":case "F":case "M":y= "D"==d.character||"l"==d.character?a.data("Zebra_DatePicker").settings.days:a.data("Zebra_DatePicker").settings.months;H=!1;c.each(y,function(a,c){if(H)return!0;if(segments[b+1].toLowerCase()==c.substring(0,"D"==d.character||"M"==d.character?3:c.length).toLowerCase()){switch(d.character){case "D":segments[b+1]=x[a].substring(0,3);break;case "l":segments[b+1]=x[a];break;case "F":segments[b+1]=w[a];C=a+1;break;case "M":segments[b+1]=w[a].substring(0,3),C=a+1}H=!0}});break;case "Y":G=parseInt(segments[b+ 1],10);break;case "y":G="19"+parseInt(segments[b+1],10)}});H&&(r=new Date(G,C-1,v),r.getFullYear()==G&&(r.getDate()==v&&r.getMonth()==C-1)&&(a.data("timestamp",Date.parse(w[C-1]+" "+v+", "+G)),l=!0))}l||(b=!1)}}break;case "datecompare":switch(e.type){case "password":case "text":case "textarea":if(void 0!=d.rules[h][0]&&void 0!=d.rules[h][1]&&c(d.rules[h][0])&&!0===g.validate_control(c(d.rules[h][0]))&&void 0!=a.data("timestamp"))switch(d.rules[h][1]){case ">":b=a.data("timestamp")>c("#"+d.rules[h][0]).data("timestamp"); break;case ">=":b=a.data("timestamp")>=c("#"+d.rules[h][0]).data("timestamp");break;case "<":b=a.data("timestamp")<c("#"+d.rules[h][0]).data("timestamp");break;case "<=":b=a.data("timestamp")<=c("#"+d.rules[h][0]).data("timestamp")}else b=!1}break;case "digits":switch(e.type){case "password":case "text":case "textarea":l=RegExp("^[0-9"+D(d.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=c.trim(a.val())&&!l.test(a.val())&&(b=!1)}break;case "email":switch(e.type){case "password":case "text":case "textarea":""!= c.trim(a.val())&&null==a.val().match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(b=!1)}break;case "emails":switch(e.type){case "password":case "text":case "textarea":a.val().split(",").each(function(a){""!=c.trim(a)&&null==c.trim(a).match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(b=!1)})}break;case "filesize":switch(e.type){case "file":var u=a.data("file_info");if(u&&(void 0==u[2]||void 0==u[3]|| 0!=u[2]||parseInt(u[3],10)>parseInt(d.rules[h][0],10)))b=!1}break;case "filetype":switch(e.type){case "file":if(u=a.data("file_info")){void 0==g.mimes&&c.ajax({url:decodeURIComponent(g.settings.assets_path)+"mimes.json",async:!1,success:function(a){g.mimes=a},dataType:"json"});var E=c.map(d.rules[h][0].split(","),function(a){return c.trim(a)}),z=[];c.each(g.mimes,function(a,b){(c.isArray(b)&&-1<c.inArray(u[1],b)||!c.isArray(b)&&b==u[1])&&z.push(a)});var A=!1;c.each(z,function(a,b){-1<c.inArray(b, E)&&(A=!0)});A||(b=!1)}}break;case "float":switch(e.type){case "password":case "text":case "textarea":if(l=RegExp("^[0-9-."+D(d.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=c.trim(a.val())&&("-"==c.trim(a.val())||"."==c.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||null!=a.val().match(/\./g)&&1<a.val().match(/\./g).length||0<a.val().indexOf("-")||!l.test(a.val())))b=!1}break;case "image":switch(e.type){case "file":(u=a.data("file_info"))&&null==u[1].match(/image\/(gif|jpeg|png|pjpeg)/i)&& (b=!1)}break;case "length":switch(e.type){case "password":case "text":case "textarea":if(""!=a.val()&&void 0!=d.rules[h][0]&&a.val().length-J(a)<d.rules[h][0]||void 0!=d.rules[h][1]&&0<d.rules[h][1]&&a.val().length-J(a)>d.rules[h][1])b=!1}break;case "number":switch(e.type){case "password":case "text":case "textarea":if(l=RegExp("^[0-9-"+D(d.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=c.trim(a.val())&&("-"==c.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||0<a.val().indexOf("-")|| !l.test(a.val())))b=!1}break;case "regexp":switch(e.type){case "password":case "text":case "textarea":l=RegExp(d.rules[h][0],"g"),""!=c.trim(a.val())&&null==l.exec(a.val())&&(b=!1)}break;case "required":switch(e.type){case "checkbox":case "radio":var B=!1;I[e.id].each(function(){this.checked&&(B=!0)});B||(b=!1);break;case "file":case "password":case "text":case "textarea":""==c.trim(a.val())&&(b=!1);break;case "select-one":if(a.hasClass("time")&&0==a.get(0).selectedIndex)e.id=e.id.replace(/\_(hours|minutes|seconds|ampm)$/, ""),b=!1;else if(a.hasClass("other")&&"other"==a.val()&&(!c("#"+e.id+"_other").length||""==c.trim(c("#"+e.id+"_other").val()))||0==a.get(0).selectedIndex)b=!1;break;case "select-multiple":-1==a.get(0).selectedIndex&&(b=!1)}break;case "upload":switch(e.type){case "file":if((u=a.data("file_info"))&&(!u[2]||0!=u[2]))b=!1}break;case "url":switch(e.type){case "password":case "text":case "textarea":l=RegExp("^(http(s)?://)"+("1"===d.rules[h][0]?"":"?")+"[^\\s\\.]+\\..{2,}","i"),""!=c.trim(a.val())&&!l.test(a.val())&& (b=!1)}}b||(m=h,d.message="custom"==h?custom_rule_error_message:g.settings.validation_rules[f][m][g.settings.validation_rules[f][m].length-1],d.value=a.val())}}return b?!0:m};g.validate=function(){var a,c=!0;g.clear_errors();s={};for(index in p){if(!c&&!g.settings.validate_all)break;a=p[index].element;if(!0!==(rule_not_passed=g.validate_control(a)))c=!1}c||g.show_errors();A=!0;return c};var N=function(){c.each(E,function(){var a=c(this),e=a.data("Zebra_Form_Placeholder");""==a.val()&&!a.is(":focus")? e.css("display","block"):e.css("display","none")})},D=function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},B=function(a){if(null!=a.selectionStart)return a.selectionStart;var c=document.selection.createRange(),b=c.duplicate();if("text"==a.type)return 0-b.moveStart("character",-1E5);var d=a.value.length;b.moveToElementText(a);b.setEndPoint("StartToStart",c);return d-b.text.length},J=function(a){a=a.val();var c=a.length;return a.replace(/(\r\n|\r|\n)/g,"\r\n").length-c},K=function(a){var e= c("#"+a.attr("id")+"_other");"other"==a.val()?e.css("display","block"):e.css("display","none")},w=function(a){if(!c.isArray(a))return a;var e="";c.each(a,function(b){b=a[b];c.isArray(b)&&(b="|"+w(b)+"|");e+=""+b});return e},F=function(a){var c="button input:checkbox input:file input:password input:radio input:submit input:text select textarea".split(" ");for(index in c)if(a.is(c[index]))return"select"==c[index]?a.attr("multiple")?"select-multiple":"select-one":c[index].replace(/input\:/,"")},L=function(a, e){void 0==e&&(e=[]);2<e.length&&e.shift();if(-1<c.inArray(a,e))throw Error('Infinite recursion detected. The loop of dependencies is created by the following elements: "'+e.join('", "')+'"');e.push(a);var b=g.settings.validation_rules[a].dependencies;"string"==typeof b[1]&&(b=b[0]);var d=!0,f;for(f in b){if(void 0!=s[f]&&void 0!=s[f][b[f]])d=s[f][b[f]];else{void 0!=g.settings.validation_rules[f]&&void 0!=g.settings.validation_rules[f].dependencies&&(d=L(f,e));if(d){var n=w(b[f]);m[f].conditions[n]()|| (d=!1)}void 0==s[f]&&(s[f]={});void 0==s[f][b[f]]&&(s[f][b[f]]=d)}if(!d)break}return d};g.init()};c.fn.Zebra_Form=function(v){return this.each(function(){var y=new c.Zebra_Form(this,v);c(this).data("Zebra_Form",y)})}})(jQuery);